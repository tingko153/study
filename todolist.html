<!DOCTYPE html>
<html>
<head>
	<title></title>
	<style>
		 * { margin:0; padding:0; }
		 ul li, ol li {list-style:none;}
		
		#input { margin:10px; }
		#todoList { border:1px solid #000; padding:10px; margin:10px; width:500px;}
		#todoList li { width:100%; }
		#todoList li .del { display:none; float:right; margin-left:10px; border:0; background:none; }
		#todoList li:hover { background:skyblue; }
		#todoList li:hover .del { display:block; }
	</style>
</head>
<body>
	<h1>TODO LIST</h1>
	<div id="todoWrap">
		<div id="input"><input type="text" id="txt" /> <button type="submit" data-type="add">add</button> </div>
		<ul id="todoList"></ul>
	</div>
	<script>
		(() => {
			const todo = {
				init() {
					this.todos = [],
					this.count = 0,
					this.list = document.getElementById('todoList'),
					this.eventHandler();
				},
				eventHandler() {
					const input = document.getElementById('input');

					input.addEventListener('click', (e) => {
						let target = e.target,
							dataType = target.getAttribute('data-type'),
							callbackFunction = todo[dataType];

						if(dataType) callbackFunction.bind(this)();
					});

					this.list.addEventListener('click', (e) => {
						let target = e.target;
						
						if(target.nodeName == 'BUTTON') this.delete(target);


					});
				},
				add() {
					const node = document.createElement('li'),
							val = document.getElementById('txt');

					if( val.value == '' ) {
						console.log('값 입력');
					}else {
						this.count++;
						node.setAttribute('data-count', this.count);
						node.innerHTML = '<label><input type="checkbox" />' + val.value + '</label><button data-type="delete" class="del">X</button>';
						this.list.appendChild(node);
					}

					this.setTodos(val.value);
					val.value = '';
				},
				delete(target) {
					let el = target.parentNode,
						targetCount = this.getCount(el);

					el.remove();
					// console.log(this.todos);
				},
				setTodos(txt) {
					this.todos[this.count-1] = {
						value: txt,
						complete: false
					};
					
					console.log(this.todos);
				},
				getCount(el) {
					return el.getAttribute('data-count');
				}
			};

			todo.init();



		})();
	</script>
</body>
</html>